[TOC]



### 1. XSS

​	全称 `Cross Site Scripting`（**跨站脚本**攻击，区别于css，故简称xss），是指浏览器中执行恶意脚本，一般用于：

* 窃取 cookie
* 伪造登录表单，劫持用户账号密码
* 生成浮窗广告

通常情况下，xss的实现方式有三种方式：

* 存储型：
    * 被保存到了服务器，在客户端执行。
    * 常见的场景是留言区评论。
* 反射型：
    * 恶意脚本作为网络请求的一部分，服务器拿到后将其中内容返回作为html的内容
* 文档型：
    * 不经过服务器
    * 发生在中间过程，劫持到数据包后修改其中的内容，比如 `WIFI路由器劫持` 或 `本地恶意软件劫持`。

三种方式的攻击共同点都是：让脚本在客户端执行。那么防范的方式就是避免这些脚本能有效执行：

* 对用户输入进行 **转码** 或 **过滤**

* 利用 csp：

    * 内容安全策略，content security policy
    * 它能限定资源来源 和 上报违规报告。
    * 启用：
        * `<meta>` 元素指定：`<meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src https://*; child-src 'none';">`
        * 服务器返回 `Content-Security-Policy` HTTP 头部。

* 利用 http-only

    

### 2. CSRF

​	全称 `Cross-siteRequest Forgery`（跨站请求伪造），指的是黑客诱导用户点击打开黑客网站，然后黑客利用 **用户目前的登录状态 **发起跨站请求。

点击之后，攻击的方式可能：

* 自动发送get请求
    * `<img src="https://xxx.com/transfer?user=1&count=100" />`
    * 这个get请求会携带上 `xxx.com` 的cookie信息
    * 如果这是一个转账接口，且服务器没有相应的验证机制，那么该恶意操作就有可能成功。
* 自动发送post请求：
    * 预设了转账表单
    * 同理。

综上，csrf的攻击方式是利用 **服务器的验证漏洞** 和 **用户的登录状态** 来模拟用户操作。防范措施：

* 利用Cookie的 `SameSite`属性：Strict、Lax、none
* 验证来源站点：Origin（域名信息） 和 Referer（完整的url）
* CSFR Token
    * 服务器返回响应时，在返回的**页面**中植入生成的 csrf token
    * 每次浏览器请求，携带上这个token以作验证，不合法则不通过。



### 3. 密码加盐

> 数据表中存储的密码不是简单的hash值，而是：`MD5(password + salt)`
>
> * salt 随机产生，一同存放在数据库；
> * salt的位置不一定是后边，还可以是中间，倒序等，能加大破解难度。

预防的是 数据库数据泄露后，被获取用户密码。

因为一些人有心收集了一些简单的密码，hash后生成一个数据字典；如果没有加盐，那么就很有可能被匹配出相应的密码，但如果加盐了，那么匹配复杂度就会高很多。（比如数据字典有600w条数据，泄露的数据有30w个，那么想要全覆盖匹配，加盐后的数据字典数据量就是 600w * 30w = 1w8000E）。



